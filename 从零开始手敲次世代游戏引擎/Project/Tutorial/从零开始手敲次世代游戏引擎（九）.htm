<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>从零开始手敲次世代游戏引擎（九）</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<P>
<EM>
<A href="https://zhuanlan.zhihu.com/p/28679304" target=_blank >
原文链接 

</A>
</EM></P>
<P>
<EM >
 (未修改原文）</EM></P>
<P >

<EM>
正文开始：</EM></P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 0px 0px 1.4em; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>上一篇我们在Linux上面通过XCB创建了一个基本的窗口。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>既然画布已经准备好，接下来就应该是准备画笔进行作画的阶段了。让我们在Windows和Linux这两个版本的窗口上各自绘制一个矩形。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>首先我们来看Windows版本。依然回到我们的Platform\Windows目录。上一次我们是使用我们自己编译的Clang工具链进行编译的。这次我们用Visual 
Studio自带的cl.exe进行编译：</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-powershell style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'><SPAN class=n>D</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">:</SPAN><SPAN class=p>\</SPAN><SPAN class=n>wenli</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Source</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Repos</SPAN><SPAN class=p>\</SPAN><SPAN class=n>GameEngineFromScratch</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Platform</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Windows</SPAN><SPAN class=p>&gt;</SPAN><SPAN class=n>cl</SPAN> <SPAN class=n>-l</SPAN> <SPAN class=n>user32</SPAN><SPAN class=p>.</SPAN><SPAN class=n>lib</SPAN> <SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=n>用于</SPAN> <SPAN class=n>x86</SPAN> <SPAN class=n>的</SPAN> <SPAN class=n>Microsoft</SPAN> <SPAN class=p>(</SPAN><SPAN class=n>R</SPAN><SPAN class=p>)</SPAN> <SPAN class=n>C</SPAN><SPAN class=p>/</SPAN><SPAN class=n>C</SPAN><SPAN class=p>++</SPAN> <SPAN class=n>优化编译器</SPAN> <SPAN class=n>19</SPAN><SPAN class=p>.</SPAN><SPAN class=n>11</SPAN><SPAN class=p>.</SPAN><SPAN class=n>25506</SPAN> <SPAN class=n>版</SPAN>
<SPAN class=n>版权所有</SPAN><SPAN class=p>(</SPAN><SPAN class=n>C</SPAN><SPAN class=p>)</SPAN> <SPAN class=n>Microsoft</SPAN> <SPAN class=n>Corporation</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">。</SPAN><SPAN class=n>保留所有权利</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">。</SPAN>

<SPAN class=n>cl</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">:</SPAN> <SPAN class=n>命令行</SPAN> <SPAN class=n>warning</SPAN> <SPAN class=n>D9002</SPAN> <SPAN class=err style="COLOR: rgb(241,64,60)">:</SPAN><SPAN class=n>忽略未知选项</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">“</SPAN><SPAN class=n>-l</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">”</SPAN>
<SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=n>Microsoft</SPAN> <SPAN class=p>(</SPAN><SPAN class=n>R</SPAN><SPAN class=p>)</SPAN> <SPAN class=n>Incremental</SPAN> <SPAN class=n>Linker</SPAN> <SPAN class=n>Version</SPAN> <SPAN class=n>14</SPAN><SPAN class=p>.</SPAN><SPAN class=n>11</SPAN><SPAN class=p>.</SPAN><SPAN class=n>25506</SPAN><SPAN class=p>.</SPAN><SPAN class=n>0</SPAN>
<SPAN class=n>Copyright</SPAN> <SPAN class=p>(</SPAN><SPAN class=n>C</SPAN><SPAN class=p>)</SPAN> <SPAN class=n>Microsoft</SPAN> <SPAN class=n>Corporation</SPAN><SPAN class=p>.</SPAN>  <SPAN class=n>All</SPAN> <SPAN class=n>rights</SPAN> <SPAN class=n>reserved</SPAN><SPAN class=p>.</SPAN>

<SPAN class=p>/</SPAN><SPAN class=n>out</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">:</SPAN><SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>exe</SPAN>
<SPAN class=n>user32</SPAN><SPAN class=p>.</SPAN><SPAN class=n>lib</SPAN>
<SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>obj</SPAN></CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>可以看到，编译正常，没有任何问题。这是因为我们的代码是严格按照C/C++标准写的，Clang这方面的检查比Visual 
C++要严格很多，因此在Clang上面能够编译的代码，在Visual 
C++上面一般也是没有任何问题可以编译的。（当然，严格来说，Clang可以兼容gcc的一些gnu扩展。这些扩展是Visual 
C++所不能接受的。因此，并不是说Clang可以通过的代码VC++就一定能通过，这里面还有一个条件就是不要使用任何编译器特定的扩展）</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>好了，下面给我们的helloengine_win.c添加几行绘图指令（下面是通过git 
diff显示的文件变化情况。左侧有一个+号的行是本次新加的）</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-c style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'><SPAN class=nl>D</SPAN><SPAN class=p>:</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">\</SPAN><SPAN class=n>wenli</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">\</SPAN><SPAN class=n>Source</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">\</SPAN><SPAN class=n>Repos</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">\</SPAN><SPAN class=n>GameEngineFromScratch</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">\</SPAN><SPAN class=n>Platform</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">\</SPAN><SPAN class=n>Windows</SPAN><SPAN class=o style="FONT-WEIGHT: 600">&gt;</SPAN><SPAN class=n>git</SPAN> <SPAN class=n>diff</SPAN> <SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=n>diff</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">--</SPAN><SPAN class=n>git</SPAN> <SPAN class=n>a</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Windows</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN> <SPAN class=n>b</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Windows</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=n>index</SPAN> <SPAN class=mo style="COLOR: rgb(0,132,255)">041462</SPAN><SPAN class=n>a</SPAN><SPAN class=p>..</SPAN><SPAN class=n>b996344</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">100644</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">---</SPAN> <SPAN class=n>a</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Windows</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+++</SPAN> <SPAN class=n>b</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Windows</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=err style="COLOR: rgb(241,64,60)">@@</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">-</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">77</SPAN><SPAN class=p>,</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">6</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">+</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">77</SPAN><SPAN class=p>,</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">17</SPAN> <SPAN class=err style="COLOR: rgb(241,64,60)">@@</SPAN> <SPAN class=n>LRESULT</SPAN> <SPAN class=n>CALLBACK</SPAN> <SPAN class=n>WindowProc</SPAN><SPAN class=p>(</SPAN><SPAN class=n>HWND</SPAN> <SPAN class=n>hWnd</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>UINT</SPAN> <SPAN class=n>message</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>WPARAM</SPAN> <SPAN class=n>wParam</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>LPARAM</SPAN> <SPAN class=n>lPara</SPAN>
     <SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">// sort through and find what code to run for the message given
</SPAN><SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic"></SPAN>     <SPAN class=k style="FONT-WEIGHT: 600">switch</SPAN><SPAN class=p>(</SPAN><SPAN class=n>message</SPAN><SPAN class=p>)</SPAN>
     <SPAN class=p>{</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>       <SPAN class=k style="FONT-WEIGHT: 600">case</SPAN> <SPAN class=nl>WM_PAINT</SPAN><SPAN class=p>:</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>           <SPAN class=p>{</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>               <SPAN class=n>PAINTSTRUCT</SPAN> <SPAN class=n>ps</SPAN><SPAN class=p>;</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>               <SPAN class=n>HDC</SPAN> <SPAN class=n>hdc</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">=</SPAN> <SPAN class=n>BeginPaint</SPAN><SPAN class=p>(</SPAN><SPAN class=n>hWnd</SPAN><SPAN class=p>,</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">&amp;</SPAN><SPAN class=n>ps</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>               <SPAN class=n>RECT</SPAN> <SPAN class=n>rec</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">=</SPAN> <SPAN class=p>{</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">20</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">20</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">60</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">80</SPAN> <SPAN class=p>};</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>               <SPAN class=n>HBRUSH</SPAN> <SPAN class=n>brush</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">=</SPAN> <SPAN class=p>(</SPAN><SPAN class=n>HBRUSH</SPAN><SPAN class=p>)</SPAN> <SPAN class=n>GetStockObject</SPAN><SPAN class=p>(</SPAN><SPAN class=n>BLACK_BRUSH</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>               <SPAN class=n>FillRect</SPAN><SPAN class=p>(</SPAN><SPAN class=n>hdc</SPAN><SPAN class=p>,</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">&amp;</SPAN><SPAN class=n>rec</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>brush</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>               <SPAN class=n>EndPaint</SPAN><SPAN class=p>(</SPAN><SPAN class=n>hWnd</SPAN><SPAN class=p>,</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">&amp;</SPAN><SPAN class=n>ps</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>           <SPAN class=p>}</SPAN> <SPAN class=k style="FONT-WEIGHT: 600">break</SPAN><SPAN class=p>;</SPAN>
         <SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">// this message is read when the window is closed
</SPAN><SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic"></SPAN>         <SPAN class=k style="FONT-WEIGHT: 600">case</SPAN> <SPAN class=nl>WM_DESTROY</SPAN><SPAN class=p>:</SPAN>
             <SPAN class=p>{</SPAN></CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>然后编译这个程序。因为我们使用了GetStockObject这个函数，这个函数属于GDI接口（就是我前面提到过的，因为爆慢而最后导致不得不推出Direct 
X的接口），我们需要在编译的时候加上gdi32.lib这个库。</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-powershell style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'><SPAN class=n>D</SPAN><SPAN class=err style="COLOR: rgb(241,64,60)">:</SPAN><SPAN class=p>\</SPAN><SPAN class=n>wenli</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Source</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Repos</SPAN><SPAN class=p>\</SPAN><SPAN class=n>GameEngineFromScratch</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Platform</SPAN><SPAN class=p>\</SPAN><SPAN class=n>Windows</SPAN><SPAN class=p>&gt;</SPAN><SPAN class=n>cl</SPAN> <SPAN class=n>user32</SPAN><SPAN class=p>.</SPAN><SPAN class=n>lib</SPAN> <SPAN class=n>gdi32</SPAN><SPAN class=p>.</SPAN><SPAN class=n>lib</SPAN> <SPAN class=n>helloengine_win</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN></CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>运行生成的程序，看到如下画面：</P>
<P class=ztext-empty-paragraph 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: -0.8em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><BR></P><FIGURE 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px' 
data-size="normal"><IMG class="origin_image zh-lightbox-thumb lazy" 
style="CURSOR: zoom-in; MAX-WIDTH: 100%; MARGIN: 0px auto; DISPLAY: block" 
src="https://pic1.zhimg.com/80/v2-5284cdf875eeb56c9d5247d2675aa128_hd.jpg" 
width=486 data-rawwidth="486" data-rawheight="393" 
data-actualsrc="https://pic1.zhimg.com/v2-5284cdf875eeb56c9d5247d2675aa128_b.jpg" 
data-size="normal" 
data-original="https://pic1.zhimg.com/v2-5284cdf875eeb56c9d5247d2675aa128_r.jpg"></FIGURE>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>很好，如果我们再在右边画个方块，中间画个圆圈，并且加入一点碰撞计算的代码和键盘操作代码的话，那么一个Ping-pong游戏（乒乓游戏）就完成了。那就到达了二十几岁乔布斯走过的地方：）</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>不过不要忘了我们目前是在图形支线任务里面。所以让我们暂时不要去管碰撞计算，也不要管键盘操作。让我们Save我们的代码，然后切换到Linux平台。</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-text style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'>D:\wenli\Source\Repos\GameEngineFromScratch\Platform\Windows&gt;git add helloengine_win.c

D:\wenli\Source\Repos\GameEngineFromScratch\Platform\Windows&gt;git commit -m "in the middle of article_9"
[master 7f05a0e] in the middle of article_9
 1 file changed, 11 insertions(+)</CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>首先，让我们如下修改我们的helloengine_xcb.c:</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-c style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'><SPAN class=n>diff</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">--</SPAN><SPAN class=n>git</SPAN> <SPAN class=n>a</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Linux</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_xcb</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN> <SPAN class=n>b</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Linux</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_xcb</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=n>index</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">62</SPAN><SPAN class=n>cb467</SPAN><SPAN class=p>.</SPAN><SPAN class=mf style="COLOR: rgb(0,132,255)">.7e44</SPAN><SPAN class=n>b48</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">100644</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">---</SPAN> <SPAN class=n>a</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Linux</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_xcb</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+++</SPAN> <SPAN class=n>b</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Platform</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>Linux</SPAN><SPAN class=o style="FONT-WEIGHT: 600">/</SPAN><SPAN class=n>helloengine_xcb</SPAN><SPAN class=p>.</SPAN><SPAN class=n>c</SPAN>
<SPAN class=err style="COLOR: rgb(241,64,60)">@@</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">-</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">75</SPAN><SPAN class=p>,</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">6</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">+</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">75</SPAN><SPAN class=p>,</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">11</SPAN> <SPAN class=err style="COLOR: rgb(241,64,60)">@@</SPAN> <SPAN class=kt style="FONT-WEIGHT: 600; COLOR: rgb(23,81,153)">int</SPAN> <SPAN class=n>main</SPAN><SPAN class=p>(</SPAN><SPAN class=kt style="FONT-WEIGHT: 600; COLOR: rgb(23,81,153)">void</SPAN><SPAN class=p>)</SPAN> <SPAN class=p>{</SPAN>
        <SPAN class=k style="FONT-WEIGHT: 600">while</SPAN><SPAN class=p>((</SPAN><SPAN class=n>pEvent</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">=</SPAN> <SPAN class=n>xcb_wait_for_event</SPAN><SPAN class=p>(</SPAN><SPAN class=n>pConn</SPAN><SPAN class=p>))</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">&amp;&amp;</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">!</SPAN><SPAN class=n>isQuit</SPAN><SPAN class=p>)</SPAN> <SPAN class=p>{</SPAN>
                <SPAN class=k style="FONT-WEIGHT: 600">switch</SPAN><SPAN class=p>(</SPAN><SPAN class=n>pEvent</SPAN><SPAN class=o style="FONT-WEIGHT: 600">-&gt;</SPAN><SPAN class=n>response_type</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">&amp;</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">~</SPAN><SPAN class=mh style="COLOR: rgb(0,132,255)">0x80</SPAN><SPAN class=p>)</SPAN> <SPAN class=p>{</SPAN>
                <SPAN class=k style="FONT-WEIGHT: 600">case</SPAN> <SPAN class=nl>XCB_EXPOSE</SPAN><SPAN class=p>:</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>                   <SPAN class=p>{</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>                       <SPAN class=n>xcb_rectangle_t</SPAN> <SPAN class=n>rect</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">=</SPAN> <SPAN class=p>{</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">20</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">20</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">60</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">80</SPAN> <SPAN class=p>};</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>                       <SPAN class=n>xcb_poly_fill_rectangle</SPAN><SPAN class=p>(</SPAN><SPAN class=n>pConn</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>window</SPAN><SPAN class=p>,</SPAN> <SPAN class=n>foreground</SPAN><SPAN class=p>,</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">1</SPAN><SPAN class=p>,</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">&amp;</SPAN><SPAN class=n>rect</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>                       <SPAN class=n>xcb_flush</SPAN><SPAN class=p>(</SPAN><SPAN class=n>pConn</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>                   <SPAN class=p>}</SPAN>
                        <SPAN class=k style="FONT-WEIGHT: 600">break</SPAN><SPAN class=p>;</SPAN>
                <SPAN class=k style="FONT-WEIGHT: 600">case</SPAN> <SPAN class=nl>XCB_KEY_PRESS</SPAN><SPAN class=p>:</SPAN>
                        <SPAN class=n>isQuit</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">=</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">1</SPAN><SPAN class=p>;</SPAN>
<SPAN class=err style="COLOR: rgb(241,64,60)">@@</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">-</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">83</SPAN><SPAN class=p>,</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">6</SPAN> <SPAN class=o style="FONT-WEIGHT: 600">+</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">88</SPAN><SPAN class=p>,</SPAN><SPAN class=mi style="COLOR: rgb(0,132,255)">8</SPAN> <SPAN class=err style="COLOR: rgb(241,64,60)">@@</SPAN> <SPAN class=kt style="FONT-WEIGHT: 600; COLOR: rgb(23,81,153)">int</SPAN> <SPAN class=n>main</SPAN><SPAN class=p>(</SPAN><SPAN class=kt style="FONT-WEIGHT: 600; COLOR: rgb(23,81,153)">void</SPAN><SPAN class=p>)</SPAN> <SPAN class=p>{</SPAN>
                <SPAN class=n>free</SPAN><SPAN class=p>(</SPAN><SPAN class=n>pEvent</SPAN><SPAN class=p>);</SPAN>
        <SPAN class=p>}</SPAN>

<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>       <SPAN class=n>xcb_disconnect</SPAN><SPAN class=p>(</SPAN><SPAN class=n>pConn</SPAN><SPAN class=p>);</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">+</SPAN>
        <SPAN class=k style="FONT-WEIGHT: 600">return</SPAN> <SPAN class=mi style="COLOR: rgb(0,132,255)">0</SPAN><SPAN class=p>;</SPAN></CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>最后的xcb_disconnect是上次漏掉的，补上。任何事情要善始善终，Connect了就一定要Disconnect。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>注意这里有一个小小的Trick。因为我们的文件后缀名为.c，所以Clang会将我们的代码作为C代码来编译。在C代码当中，变量的定义必须出现在每个block的开始，而不能夹杂在语句之间。但是，有些变量我们只有在函数当中某个地方才会使用，放在函数体的头上也怪怪的。比如这个rect。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>所以，我们在这里使用了{}，将这部分声明为一个语句块，也就是block。这样我们就可以在这里面申明变量了。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>当然，还有一个简便的方法。你可以把文件后缀改为.cpp。因为所有合法的.c都是合法的.cpp，而C++允许在语句中间申明变量。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>不过我依然不鼓励这么做。就像我前面说的，要脱离Visual 
Studio。舒服的环境只会使人模棱两可。我们首先应该精确地掌握各种概念，在这个基础之上，选择舒服方便的方法，才是正确的。</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>好了，编译这个代码：</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-bash style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'>tim@iZuf6iup3mphicesefdwajZ:~/src/GameEngineFromScratch/Platform/Linux$ clang -lxcb -o helloengine_xcb helloengine_xcb.c</CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>执行它，看到如下画面：</P>
<P class=ztext-empty-paragraph 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: -0.8em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><BR></P><FIGURE 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px' 
data-size="normal"><IMG class="origin_image zh-lightbox-thumb lazy" 
style="CURSOR: zoom-in; MAX-WIDTH: 100%; MARGIN: 0px auto; DISPLAY: block" 
src="https://pic3.zhimg.com/80/v2-3a575c5639b16bfbf52781411804e132_hd.jpg" 
width=1026 data-rawwidth="1026" data-rawheight="800" 
data-actualsrc="https://pic3.zhimg.com/v2-3a575c5639b16bfbf52781411804e132_b.jpg" 
data-size="normal" 
data-original="https://pic3.zhimg.com/v2-3a575c5639b16bfbf52781411804e132_r.jpg"></FIGURE>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>好了，我们在Linux上面也实现了同样的效果。保存我们的代码，准备迈出下一步。</P>
<DIV class=highlight 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><PRE style="OVERFLOW: auto; WORD-WRAP: normal; FONT-SIZE: 0.9em; BACKGROUND: rgb(246,246,246); WHITE-SPACE: pre; WORD-BREAK: normal; PADDING-BOTTOM: 0.88em; PADDING-TOP: 0.88em; PADDING-LEFT: 0.88em; MARGIN: 0px; PADDING-RIGHT: 0.88em; border-radius: 4px"><CODE class=language-bash style='FONT-FAMILY: Menlo, Monaco, Consolas, "Andale Mono", "lucida console", "Courier New", monospace; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; border-radius: 0px'>tim@iZuf6iup3mphicesefdwajZ:~/src/GameEngineFromScratch/Platform/Linux$ git status
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic"># On branch article_8</SPAN>
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic"># Your branch is ahead of 'origin/article_8' by 1 commit.</SPAN>
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">#   (use "git push" to publish your local commits)</SPAN>
#
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic"># Changes not staged for commit:</SPAN>
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">#   (use "git add &lt;file&gt;..." to update what will be committed)</SPAN>
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</SPAN>
#
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">#       modified:   helloengine_xcb.c</SPAN>
#
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic"># Untracked files:</SPAN>
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">#   (use "git add &lt;file&gt;..." to include in what will be committed)</SPAN>
#
<SPAN class=c1 style="COLOR: rgb(153,153,153); FONT-STYLE: italic">#       helloengine_xcb</SPAN>
no changes added to commit <SPAN class=o style="FONT-WEIGHT: 600">(</SPAN>use <SPAN class=s2 style="COLOR: rgb(241,64,60)">"git add"</SPAN> and/or <SPAN class=s2 style="COLOR: rgb(241,64,60)">"git commit -a"</SPAN><SPAN class=o style="FONT-WEIGHT: 600">)</SPAN>
tim@iZuf6iup3mphicesefdwajZ:~/src/GameEngineFromScratch/Platform/Linux$ git add helloengine_xcb.c
tim@iZuf6iup3mphicesefdwajZ:~/src/GameEngineFromScratch/Platform/Linux$ git commit -m <SPAN class=s2 style="COLOR: rgb(241,64,60)">"end of article_9"</SPAN>
<SPAN class=o style="FONT-WEIGHT: 600">[</SPAN>article_8 c502b89<SPAN class=o style="FONT-WEIGHT: 600">]</SPAN> end of article_9
 <SPAN class=m style="COLOR: rgb(0,132,255)">1</SPAN> file changed, <SPAN class=m style="COLOR: rgb(0,132,255)">7</SPAN> insertions<SPAN class=o style="FONT-WEIGHT: 600">(</SPAN>+<SPAN class=o style="FONT-WEIGHT: 600">)</SPAN></CODE></PRE></DIV>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>(-- 
EOF --)</P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>参考引用：</P>
<OL 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; DISPLAY: table; LETTER-SPACING: normal; COUNTER-RESET: ol 0; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>
  <LI style="LIST-STYLE-TYPE: none; DISPLAY: table-row"><A 
  class=" wrap external" 
  style="CURSOR: pointer; TEXT-DECORATION: none; BORDER-BOTTOM: grey 1px solid; COLOR: " 
  href="https://link.zhihu.com/?target=https%3A//www.x.org/releases/X11R7.6/doc/libxcb/tutorial/index.html" 
  rel="nofollow noreferrer" target=_blank data-za-detail-view-id="1043">Basic 
  Graphics Programming With The XCB Library</A></LI>
  <LI style="LIST-STYLE-TYPE: none; DISPLAY: table-row"><A 
  class=" wrap external" 
  style="CURSOR: pointer; TEXT-DECORATION: none; BORDER-BOTTOM: grey 1px solid; COLOR: " 
  href="https://link.zhihu.com/?target=https%3A//xcb.freedesktop.org/tutorial/" 
  rel="nofollow noreferrer" target=_blank 
  data-za-detail-view-id="1043">tutorial</A></LI>
  <LI style="LIST-STYLE-TYPE: none; DISPLAY: table-row"><A 
  class=" wrap external" 
  style="CURSOR: pointer; TEXT-DECORATION: none; BORDER-BOTTOM: grey 1px solid; COLOR: " 
  href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/XCB" 
  rel="nofollow noreferrer" target=_blank data-za-detail-view-id="1043">XCB - 
  Wikipedia</A></LI></OL><FIGURE 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px' 
data-size="normal"><IMG class="content_image lazy" 
style="MAX-WIDTH: 100%; MARGIN: 0px auto; DISPLAY: block" 
src="https://pic2.zhimg.com/80/v2-229daa2bfc2444f20a57a2deabf6522d_hd.jpg" 
width=88 data-rawwidth="88" data-rawheight="31" 
data-actualsrc="https://pic2.zhimg.com/v2-229daa2bfc2444f20a57a2deabf6522d_b.jpg" 
data-size="normal"></FIGURE>
<P class=ztext-empty-paragraph 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: -0.8em 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'><BR></P>
<P 
style='FONT-SIZE: medium; FONT-FAMILY: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Microsoft YaHei", "Source Han Sans SC", "Noto Sans CJK SC", "WenQuanYi Micro Hei", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(26,26,26); FONT-STYLE: normal; MARGIN: 1.4em 0px 0px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px'>本作品采用<A 
class=" wrap external" 
style="CURSOR: pointer; TEXT-DECORATION: none; BORDER-BOTTOM: grey 1px solid; COLOR: " 
href="https://link.zhihu.com/?target=http%3A//creativecommons.org/licenses/by/4.0/" 
rel="nofollow noreferrer" target=_blank data-za-detail-view-id="1043">知识共享署名 4.0 
国际许可协议</A>进行许可。</P></body>
</html>
